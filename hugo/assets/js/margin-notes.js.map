{"version":3,"sources":["margin-notes-utils.js","../../../node_modules/@juggle/resize-observer/lib/utils/resizeObservers.js","../../../node_modules/@juggle/resize-observer/lib/algorithms/hasActiveObservations.js","../../../node_modules/@juggle/resize-observer/lib/algorithms/hasSkippedObservations.js","../../../node_modules/@juggle/resize-observer/lib/algorithms/deliverResizeLoopError.js","../../../node_modules/@juggle/resize-observer/lib/ResizeObserverBoxOptions.js","../../../node_modules/@juggle/resize-observer/lib/utils/freeze.js","../../../node_modules/@juggle/resize-observer/lib/ResizeObserverSize.js","../../../node_modules/@juggle/resize-observer/lib/DOMRectReadOnly.js","../../../node_modules/@juggle/resize-observer/lib/utils/element.js","../../../node_modules/@juggle/resize-observer/lib/utils/global.js","../../../node_modules/@juggle/resize-observer/lib/algorithms/calculateBoxSize.js","../../../node_modules/@juggle/resize-observer/lib/ResizeObserverEntry.js","../../../node_modules/@juggle/resize-observer/lib/algorithms/calculateDepthForNode.js","../../../node_modules/@juggle/resize-observer/lib/algorithms/broadcastActiveObservations.js","../../../node_modules/@juggle/resize-observer/lib/algorithms/gatherActiveObservationsAtDepth.js","../../../node_modules/@juggle/resize-observer/lib/utils/process.js","../../../node_modules/@juggle/resize-observer/lib/utils/queueMicroTask.js","../../../node_modules/@juggle/resize-observer/lib/utils/queueResizeObserver.js","../../../node_modules/@juggle/resize-observer/lib/utils/scheduler.js","../../../node_modules/@juggle/resize-observer/lib/ResizeObservation.js","../../../node_modules/@juggle/resize-observer/lib/ResizeObserverDetail.js","../../../node_modules/@juggle/resize-observer/lib/ResizeObserverController.js","../../../node_modules/@juggle/resize-observer/lib/ResizeObserver.js","../../../node_modules/@juggle/resize-observer/lib/exports/resize-observer.js","margin-notes.js"],"names":["docReady","fn","document","readyState","setTimeout","addEventListener","windowLoaded","window","onWindowResize","resizeObservers","hasActiveObservations","some","ro","activeTargets","length","hasSkippedObservations","skippedTargets","msg","deliverResizeLoopError","event","ErrorEvent","message","createEvent","initEvent","dispatchEvent","ResizeObserverBoxOptions","freeze","obj","Object","ResizeObserverSize","inlineSize","blockSize","DOMRectReadOnly","x","y","width","height","top","left","bottom","right","prototype","toJSON","_a","fromRect","rectangle","isSVG","target","SVGElement","isHidden","getBBox","_b","offsetWidth","offsetHeight","getClientRects","isElement","scope","ownerDocument","defaultView","Element","isReplacedElement","tagName","type","global","cache","WeakMap","scrollRegexp","verticalRegexp","IE","test","navigator","userAgent","parseDimension","pixel","parseFloat","size","switchSizes","zeroBoxes","devicePixelContentBoxSize","borderBoxSize","contentBoxSize","contentRect","calculateBoxSizes","forceRecalculation","has","get","set","cs","getComputedStyle","svg","ownerSVGElement","removePadding","boxSizing","writingMode","canScrollVertically","overflowY","canScrollHorizontally","overflowX","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTop","borderTopWidth","borderRight","borderRightWidth","borderBottom","borderBottomWidth","horizontalPadding","verticalPadding","horizontalBorderArea","borderLeftWidth","verticalBorderArea","horizontalScrollbarThickness","clientHeight","verticalScrollbarThickness","clientWidth","widthReduction","heightReduction","contentWidth","contentHeight","borderBoxWidth","borderBoxHeight","boxes","Math","round","devicePixelRatio","calculateBoxSize","observedBox","DEVICE_PIXEL_CONTENT_BOX","BORDER_BOX","ResizeObserverEntry","calculateDepthForNode","node","Infinity","parent","depth","parentNode","broadcastActiveObservations","shallowestDepth","callbacks","forEach","entries","ot","entry","targetDepth","push","lastReportedSize","callback","call","observer","splice","_i","callbacks_1","gatherActiveObservationsAtDepth","observationTargets","isActive","process","trigger","notify","cb","queueMicroTask","toggle_1","el_1","createTextNode","MutationObserver","observe","characterData","textContent","queueResizeObserver","requestAnimationFrame","watching","isWatching","CATCH_PERIOD","observerConfig","attributes","childList","subtree","events","time","timeout","Date","now","scheduled","Scheduler","_this","stopped","listener","schedule","run","until","elementsHaveResized","start","stop","body","name","disconnect","removeEventListener","scheduler","updateCount","n","skipNotifyOnElement","display","ResizeObservation","CONTENT_BOX","ResizeObserverDetail","resizeObserver","observerMap","getObservationIndex","i","ResizeObserverController","connect","detail","options","firstObservation","box","unobserve","index","lastObservation","indexOf","slice","ResizeObserver","arguments","TypeError","toString","ARTICLE_CONTENT_SELECTOR","FOOTNOTE_SECTION_SELECTOR","FLOATING_FOOTNOTE_MIN_WIDTH","computeOffsetForAlignment","elemToAlign","targetAlignment","offsetParentTop","offsetParent","getBoundingClientRect","setFootnoteOffsets","footnotes","bottomOfLastElem","Array","footnote","intextLink","querySelector","id","offset","closest","parseInt","marginBottom","marginTop","style","position","clearFootnoteOffsets","updateFootnoteFloat","shouldFloat","footnoteSection","querySelectorAll","classList","add","subscribeToUpdates","unsubscribeFromUpdates","remove","article","notifySizeChange","bigEnough","nowBigEnough","innerWidth","_entries","enableFloatingFootnotes","allowFloatingFootnotes","contains"],"mappings":"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","file":"margin-notes.js","sourceRoot":"../js-src","sourcesContent":["// borrowed from https://stackoverflow.com/questions/9899372/pure-javascript-equivalent-of-jquerys-ready-how-to-call-a-function-when-t\nfunction docReady(fn) {\n    // see if DOM is already available\n    if (document.readyState === \"complete\" || document.readyState === \"interactive\") {\n        // call on next available tick\n        setTimeout(fn, 1);\n    } else {\n        document.addEventListener(\"DOMContentLoaded\", fn);\n    }\n}\n\nfunction windowLoaded(fn) {\n    // see if we're already loaded\n    if (document.readyState === \"complete\") {\n        // call on next available tick\n        setTimeout(fn, 1);\n    } else {\n        window.addEventListener(\"load\", fn);\n    }\n}\n\nfunction onWindowResize(fn) {\n    windowLoaded(function () {\n        window.addEventListener('resize', fn);\n        setTimeout(fn, 1);\n    });\n}\n\nexport { docReady, windowLoaded, onWindowResize};\n","var resizeObservers = [];\nexport { resizeObservers };\n","import { resizeObservers } from '../utils/resizeObservers';\nvar hasActiveObservations = function () {\n    return resizeObservers.some(function (ro) { return ro.activeTargets.length > 0; });\n};\nexport { hasActiveObservations };\n","import { resizeObservers } from '../utils/resizeObservers';\nvar hasSkippedObservations = function () {\n    return resizeObservers.some(function (ro) { return ro.skippedTargets.length > 0; });\n};\nexport { hasSkippedObservations };\n","var msg = 'ResizeObserver loop completed with undelivered notifications.';\nvar deliverResizeLoopError = function () {\n    var event;\n    if (typeof ErrorEvent === 'function') {\n        event = new ErrorEvent('error', {\n            message: msg\n        });\n    }\n    else {\n        event = document.createEvent('Event');\n        event.initEvent('error', false, false);\n        event.message = msg;\n    }\n    window.dispatchEvent(event);\n};\nexport { deliverResizeLoopError };\n","var ResizeObserverBoxOptions;\n(function (ResizeObserverBoxOptions) {\n    ResizeObserverBoxOptions[\"BORDER_BOX\"] = \"border-box\";\n    ResizeObserverBoxOptions[\"CONTENT_BOX\"] = \"content-box\";\n    ResizeObserverBoxOptions[\"DEVICE_PIXEL_CONTENT_BOX\"] = \"device-pixel-content-box\";\n})(ResizeObserverBoxOptions || (ResizeObserverBoxOptions = {}));\nexport { ResizeObserverBoxOptions };\n","export var freeze = function (obj) { return Object.freeze(obj); };\n","import { freeze } from './utils/freeze';\nvar ResizeObserverSize = (function () {\n    function ResizeObserverSize(inlineSize, blockSize) {\n        this.inlineSize = inlineSize;\n        this.blockSize = blockSize;\n        freeze(this);\n    }\n    return ResizeObserverSize;\n}());\nexport { ResizeObserverSize };\n","import { freeze } from './utils/freeze';\nvar DOMRectReadOnly = (function () {\n    function DOMRectReadOnly(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.top = this.y;\n        this.left = this.x;\n        this.bottom = this.top + this.height;\n        this.right = this.left + this.width;\n        return freeze(this);\n    }\n    DOMRectReadOnly.prototype.toJSON = function () {\n        var _a = this, x = _a.x, y = _a.y, top = _a.top, right = _a.right, bottom = _a.bottom, left = _a.left, width = _a.width, height = _a.height;\n        return { x: x, y: y, top: top, right: right, bottom: bottom, left: left, width: width, height: height };\n    };\n    DOMRectReadOnly.fromRect = function (rectangle) {\n        return new DOMRectReadOnly(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\n    };\n    return DOMRectReadOnly;\n}());\nexport { DOMRectReadOnly };\n","var isSVG = function (target) { return target instanceof SVGElement && 'getBBox' in target; };\nvar isHidden = function (target) {\n    if (isSVG(target)) {\n        var _a = target.getBBox(), width = _a.width, height = _a.height;\n        return !width && !height;\n    }\n    var _b = target, offsetWidth = _b.offsetWidth, offsetHeight = _b.offsetHeight;\n    return !(offsetWidth || offsetHeight || target.getClientRects().length);\n};\nvar isElement = function (obj) {\n    var _a, _b;\n    var scope = (_b = (_a = obj) === null || _a === void 0 ? void 0 : _a.ownerDocument) === null || _b === void 0 ? void 0 : _b.defaultView;\n    return !!(scope && obj instanceof scope.Element);\n};\nvar isReplacedElement = function (target) {\n    switch (target.tagName) {\n        case 'INPUT':\n            if (target.type !== 'image') {\n                break;\n            }\n        case 'VIDEO':\n        case 'AUDIO':\n        case 'EMBED':\n        case 'OBJECT':\n        case 'CANVAS':\n        case 'IFRAME':\n        case 'IMG':\n            return true;\n    }\n    return false;\n};\nexport { isSVG, isHidden, isElement, isReplacedElement };\n","export var global = typeof window !== 'undefined' ? window : {};\n","import { ResizeObserverBoxOptions } from '../ResizeObserverBoxOptions';\nimport { ResizeObserverSize } from '../ResizeObserverSize';\nimport { DOMRectReadOnly } from '../DOMRectReadOnly';\nimport { isSVG, isHidden } from '../utils/element';\nimport { freeze } from '../utils/freeze';\nimport { global } from '../utils/global';\nvar cache = new WeakMap();\nvar scrollRegexp = /auto|scroll/;\nvar verticalRegexp = /^tb|vertical/;\nvar IE = (/msie|trident/i).test(global.navigator && global.navigator.userAgent);\nvar parseDimension = function (pixel) { return parseFloat(pixel || '0'); };\nvar size = function (inlineSize, blockSize, switchSizes) {\n    if (inlineSize === void 0) { inlineSize = 0; }\n    if (blockSize === void 0) { blockSize = 0; }\n    if (switchSizes === void 0) { switchSizes = false; }\n    return new ResizeObserverSize((switchSizes ? blockSize : inlineSize) || 0, (switchSizes ? inlineSize : blockSize) || 0);\n};\nvar zeroBoxes = freeze({\n    devicePixelContentBoxSize: size(),\n    borderBoxSize: size(),\n    contentBoxSize: size(),\n    contentRect: new DOMRectReadOnly(0, 0, 0, 0)\n});\nvar calculateBoxSizes = function (target, forceRecalculation) {\n    if (forceRecalculation === void 0) { forceRecalculation = false; }\n    if (cache.has(target) && !forceRecalculation) {\n        return cache.get(target);\n    }\n    if (isHidden(target)) {\n        cache.set(target, zeroBoxes);\n        return zeroBoxes;\n    }\n    var cs = getComputedStyle(target);\n    var svg = isSVG(target) && target.ownerSVGElement && target.getBBox();\n    var removePadding = !IE && cs.boxSizing === 'border-box';\n    var switchSizes = verticalRegexp.test(cs.writingMode || '');\n    var canScrollVertically = !svg && scrollRegexp.test(cs.overflowY || '');\n    var canScrollHorizontally = !svg && scrollRegexp.test(cs.overflowX || '');\n    var paddingTop = svg ? 0 : parseDimension(cs.paddingTop);\n    var paddingRight = svg ? 0 : parseDimension(cs.paddingRight);\n    var paddingBottom = svg ? 0 : parseDimension(cs.paddingBottom);\n    var paddingLeft = svg ? 0 : parseDimension(cs.paddingLeft);\n    var borderTop = svg ? 0 : parseDimension(cs.borderTopWidth);\n    var borderRight = svg ? 0 : parseDimension(cs.borderRightWidth);\n    var borderBottom = svg ? 0 : parseDimension(cs.borderBottomWidth);\n    var borderLeft = svg ? 0 : parseDimension(cs.borderLeftWidth);\n    var horizontalPadding = paddingLeft + paddingRight;\n    var verticalPadding = paddingTop + paddingBottom;\n    var horizontalBorderArea = borderLeft + borderRight;\n    var verticalBorderArea = borderTop + borderBottom;\n    var horizontalScrollbarThickness = !canScrollHorizontally ? 0 : target.offsetHeight - verticalBorderArea - target.clientHeight;\n    var verticalScrollbarThickness = !canScrollVertically ? 0 : target.offsetWidth - horizontalBorderArea - target.clientWidth;\n    var widthReduction = removePadding ? horizontalPadding + horizontalBorderArea : 0;\n    var heightReduction = removePadding ? verticalPadding + verticalBorderArea : 0;\n    var contentWidth = svg ? svg.width : parseDimension(cs.width) - widthReduction - verticalScrollbarThickness;\n    var contentHeight = svg ? svg.height : parseDimension(cs.height) - heightReduction - horizontalScrollbarThickness;\n    var borderBoxWidth = contentWidth + horizontalPadding + verticalScrollbarThickness + horizontalBorderArea;\n    var borderBoxHeight = contentHeight + verticalPadding + horizontalScrollbarThickness + verticalBorderArea;\n    var boxes = freeze({\n        devicePixelContentBoxSize: size(Math.round(contentWidth * devicePixelRatio), Math.round(contentHeight * devicePixelRatio), switchSizes),\n        borderBoxSize: size(borderBoxWidth, borderBoxHeight, switchSizes),\n        contentBoxSize: size(contentWidth, contentHeight, switchSizes),\n        contentRect: new DOMRectReadOnly(paddingLeft, paddingTop, contentWidth, contentHeight)\n    });\n    cache.set(target, boxes);\n    return boxes;\n};\nvar calculateBoxSize = function (target, observedBox, forceRecalculation) {\n    var _a = calculateBoxSizes(target, forceRecalculation), borderBoxSize = _a.borderBoxSize, contentBoxSize = _a.contentBoxSize, devicePixelContentBoxSize = _a.devicePixelContentBoxSize;\n    switch (observedBox) {\n        case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:\n            return devicePixelContentBoxSize;\n        case ResizeObserverBoxOptions.BORDER_BOX:\n            return borderBoxSize;\n        default:\n            return contentBoxSize;\n    }\n};\nexport { calculateBoxSize, calculateBoxSizes };\n","import { calculateBoxSizes } from './algorithms/calculateBoxSize';\nimport { freeze } from './utils/freeze';\nvar ResizeObserverEntry = (function () {\n    function ResizeObserverEntry(target) {\n        var boxes = calculateBoxSizes(target);\n        this.target = target;\n        this.contentRect = boxes.contentRect;\n        this.borderBoxSize = freeze([boxes.borderBoxSize]);\n        this.contentBoxSize = freeze([boxes.contentBoxSize]);\n        this.devicePixelContentBoxSize = freeze([boxes.devicePixelContentBoxSize]);\n    }\n    return ResizeObserverEntry;\n}());\nexport { ResizeObserverEntry };\n","import { isHidden } from '../utils/element';\nvar calculateDepthForNode = function (node) {\n    if (isHidden(node)) {\n        return Infinity;\n    }\n    var depth = 0;\n    var parent = node.parentNode;\n    while (parent) {\n        depth += 1;\n        parent = parent.parentNode;\n    }\n    return depth;\n};\nexport { calculateDepthForNode };\n","import { resizeObservers } from '../utils/resizeObservers';\nimport { ResizeObserverEntry } from '../ResizeObserverEntry';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nimport { calculateBoxSize } from './calculateBoxSize';\nvar broadcastActiveObservations = function () {\n    var shallowestDepth = Infinity;\n    var callbacks = [];\n    resizeObservers.forEach(function processObserver(ro) {\n        if (ro.activeTargets.length === 0) {\n            return;\n        }\n        var entries = [];\n        ro.activeTargets.forEach(function processTarget(ot) {\n            var entry = new ResizeObserverEntry(ot.target);\n            var targetDepth = calculateDepthForNode(ot.target);\n            entries.push(entry);\n            ot.lastReportedSize = calculateBoxSize(ot.target, ot.observedBox);\n            if (targetDepth < shallowestDepth) {\n                shallowestDepth = targetDepth;\n            }\n        });\n        callbacks.push(function resizeObserverCallback() {\n            ro.callback.call(ro.observer, entries, ro.observer);\n        });\n        ro.activeTargets.splice(0, ro.activeTargets.length);\n    });\n    for (var _i = 0, callbacks_1 = callbacks; _i < callbacks_1.length; _i++) {\n        var callback = callbacks_1[_i];\n        callback();\n    }\n    return shallowestDepth;\n};\nexport { broadcastActiveObservations };\n","import { resizeObservers } from '../utils/resizeObservers';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nvar gatherActiveObservationsAtDepth = function (depth) {\n    resizeObservers.forEach(function processObserver(ro) {\n        ro.activeTargets.splice(0, ro.activeTargets.length);\n        ro.skippedTargets.splice(0, ro.skippedTargets.length);\n        ro.observationTargets.forEach(function processTarget(ot) {\n            if (ot.isActive()) {\n                if (calculateDepthForNode(ot.target) > depth) {\n                    ro.activeTargets.push(ot);\n                }\n                else {\n                    ro.skippedTargets.push(ot);\n                }\n            }\n        });\n    });\n};\nexport { gatherActiveObservationsAtDepth };\n","import { hasActiveObservations } from '../algorithms/hasActiveObservations';\nimport { hasSkippedObservations } from '../algorithms/hasSkippedObservations';\nimport { deliverResizeLoopError } from '../algorithms/deliverResizeLoopError';\nimport { broadcastActiveObservations } from '../algorithms/broadcastActiveObservations';\nimport { gatherActiveObservationsAtDepth } from '../algorithms/gatherActiveObservationsAtDepth';\nvar process = function () {\n    var depth = 0;\n    gatherActiveObservationsAtDepth(depth);\n    while (hasActiveObservations()) {\n        depth = broadcastActiveObservations();\n        gatherActiveObservationsAtDepth(depth);\n    }\n    if (hasSkippedObservations()) {\n        deliverResizeLoopError();\n    }\n    return depth > 0;\n};\nexport { process };\n","var trigger;\nvar callbacks = [];\nvar notify = function () { return callbacks.splice(0).forEach(function (cb) { return cb(); }); };\nvar queueMicroTask = function (callback) {\n    if (!trigger) {\n        var toggle_1 = 0;\n        var el_1 = document.createTextNode('');\n        var config = { characterData: true };\n        new MutationObserver(function () { return notify(); }).observe(el_1, config);\n        trigger = function () { el_1.textContent = \"\" + (toggle_1 ? toggle_1-- : toggle_1++); };\n    }\n    callbacks.push(callback);\n    trigger();\n};\nexport { queueMicroTask };\n","import { queueMicroTask } from './queueMicroTask';\nvar queueResizeObserver = function (cb) {\n    queueMicroTask(function ResizeObserver() {\n        requestAnimationFrame(cb);\n    });\n};\nexport { queueResizeObserver };\n","import { process } from './process';\nimport { global } from './global';\nimport { queueResizeObserver } from './queueResizeObserver';\nvar watching = 0;\nvar isWatching = function () { return !!watching; };\nvar CATCH_PERIOD = 250;\nvar observerConfig = { attributes: true, characterData: true, childList: true, subtree: true };\nvar events = [\n    'resize',\n    'load',\n    'transitionend',\n    'animationend',\n    'animationstart',\n    'animationiteration',\n    'keyup',\n    'keydown',\n    'mouseup',\n    'mousedown',\n    'mouseover',\n    'mouseout',\n    'blur',\n    'focus'\n];\nvar time = function (timeout) {\n    if (timeout === void 0) { timeout = 0; }\n    return Date.now() + timeout;\n};\nvar scheduled = false;\nvar Scheduler = (function () {\n    function Scheduler() {\n        var _this = this;\n        this.stopped = true;\n        this.listener = function () { return _this.schedule(); };\n    }\n    Scheduler.prototype.run = function (timeout) {\n        var _this = this;\n        if (timeout === void 0) { timeout = CATCH_PERIOD; }\n        if (scheduled) {\n            return;\n        }\n        scheduled = true;\n        var until = time(timeout);\n        queueResizeObserver(function () {\n            var elementsHaveResized = false;\n            try {\n                elementsHaveResized = process();\n            }\n            finally {\n                scheduled = false;\n                timeout = until - time();\n                if (!isWatching()) {\n                    return;\n                }\n                if (elementsHaveResized) {\n                    _this.run(1000);\n                }\n                else if (timeout > 0) {\n                    _this.run(timeout);\n                }\n                else {\n                    _this.start();\n                }\n            }\n        });\n    };\n    Scheduler.prototype.schedule = function () {\n        this.stop();\n        this.run();\n    };\n    Scheduler.prototype.observe = function () {\n        var _this = this;\n        var cb = function () { return _this.observer && _this.observer.observe(document.body, observerConfig); };\n        document.body ? cb() : global.addEventListener('DOMContentLoaded', cb);\n    };\n    Scheduler.prototype.start = function () {\n        var _this = this;\n        if (this.stopped) {\n            this.stopped = false;\n            this.observer = new MutationObserver(this.listener);\n            this.observe();\n            events.forEach(function (name) { return global.addEventListener(name, _this.listener, true); });\n        }\n    };\n    Scheduler.prototype.stop = function () {\n        var _this = this;\n        if (!this.stopped) {\n            this.observer && this.observer.disconnect();\n            events.forEach(function (name) { return global.removeEventListener(name, _this.listener, true); });\n            this.stopped = true;\n        }\n    };\n    return Scheduler;\n}());\nvar scheduler = new Scheduler();\nvar updateCount = function (n) {\n    !watching && n > 0 && scheduler.start();\n    watching += n;\n    !watching && scheduler.stop();\n};\nexport { scheduler, updateCount };\n","import { ResizeObserverBoxOptions } from './ResizeObserverBoxOptions';\nimport { calculateBoxSize } from './algorithms/calculateBoxSize';\nimport { isSVG, isReplacedElement } from './utils/element';\nvar skipNotifyOnElement = function (target) {\n    return !isSVG(target)\n        && !isReplacedElement(target)\n        && getComputedStyle(target).display === 'inline';\n};\nvar ResizeObservation = (function () {\n    function ResizeObservation(target, observedBox) {\n        this.target = target;\n        this.observedBox = observedBox || ResizeObserverBoxOptions.CONTENT_BOX;\n        this.lastReportedSize = {\n            inlineSize: 0,\n            blockSize: 0\n        };\n    }\n    ResizeObservation.prototype.isActive = function () {\n        var size = calculateBoxSize(this.target, this.observedBox, true);\n        if (skipNotifyOnElement(this.target)) {\n            this.lastReportedSize = size;\n        }\n        if (this.lastReportedSize.inlineSize !== size.inlineSize\n            || this.lastReportedSize.blockSize !== size.blockSize) {\n            return true;\n        }\n        return false;\n    };\n    return ResizeObservation;\n}());\nexport { ResizeObservation };\n","var ResizeObserverDetail = (function () {\n    function ResizeObserverDetail(resizeObserver, callback) {\n        this.activeTargets = [];\n        this.skippedTargets = [];\n        this.observationTargets = [];\n        this.observer = resizeObserver;\n        this.callback = callback;\n    }\n    return ResizeObserverDetail;\n}());\nexport { ResizeObserverDetail };\n","import { scheduler, updateCount } from './utils/scheduler';\nimport { ResizeObservation } from './ResizeObservation';\nimport { ResizeObserverDetail } from './ResizeObserverDetail';\nimport { resizeObservers } from './utils/resizeObservers';\nvar observerMap = new WeakMap();\nvar getObservationIndex = function (observationTargets, target) {\n    for (var i = 0; i < observationTargets.length; i += 1) {\n        if (observationTargets[i].target === target) {\n            return i;\n        }\n    }\n    return -1;\n};\nvar ResizeObserverController = (function () {\n    function ResizeObserverController() {\n    }\n    ResizeObserverController.connect = function (resizeObserver, callback) {\n        var detail = new ResizeObserverDetail(resizeObserver, callback);\n        observerMap.set(resizeObserver, detail);\n    };\n    ResizeObserverController.observe = function (resizeObserver, target, options) {\n        var detail = observerMap.get(resizeObserver);\n        var firstObservation = detail.observationTargets.length === 0;\n        if (getObservationIndex(detail.observationTargets, target) < 0) {\n            firstObservation && resizeObservers.push(detail);\n            detail.observationTargets.push(new ResizeObservation(target, options && options.box));\n            updateCount(1);\n            scheduler.schedule();\n        }\n    };\n    ResizeObserverController.unobserve = function (resizeObserver, target) {\n        var detail = observerMap.get(resizeObserver);\n        var index = getObservationIndex(detail.observationTargets, target);\n        var lastObservation = detail.observationTargets.length === 1;\n        if (index >= 0) {\n            lastObservation && resizeObservers.splice(resizeObservers.indexOf(detail), 1);\n            detail.observationTargets.splice(index, 1);\n            updateCount(-1);\n        }\n    };\n    ResizeObserverController.disconnect = function (resizeObserver) {\n        var _this = this;\n        var detail = observerMap.get(resizeObserver);\n        detail.observationTargets.slice().forEach(function (ot) { return _this.unobserve(resizeObserver, ot.target); });\n        detail.activeTargets.splice(0, detail.activeTargets.length);\n    };\n    return ResizeObserverController;\n}());\nexport { ResizeObserverController };\n","import { ResizeObserverController } from './ResizeObserverController';\nimport { isElement } from './utils/element';\nvar ResizeObserver = (function () {\n    function ResizeObserver(callback) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (typeof callback !== 'function') {\n            throw new TypeError(\"Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.\");\n        }\n        ResizeObserverController.connect(this, callback);\n    }\n    ResizeObserver.prototype.observe = function (target, options) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (!isElement(target)) {\n            throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n        }\n        ResizeObserverController.observe(this, target, options);\n    };\n    ResizeObserver.prototype.unobserve = function (target) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (!isElement(target)) {\n            throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n        }\n        ResizeObserverController.unobserve(this, target);\n    };\n    ResizeObserver.prototype.disconnect = function () {\n        ResizeObserverController.disconnect(this);\n    };\n    ResizeObserver.toString = function () {\n        return 'function ResizeObserver () { [polyfill code] }';\n    };\n    return ResizeObserver;\n}());\nexport { ResizeObserver };\n","export { ResizeObserver } from '../ResizeObserver';\nexport { ResizeObserverEntry } from '../ResizeObserverEntry';\nexport { ResizeObserverSize } from '../ResizeObserverSize';\n","// MIT License\n// Copyright (c) 2019 Fabian Tamp\n// Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nimport { docReady, onWindowResize } from \"./margin-notes-utils.js\";\nimport { ResizeObserver } from '@juggle/resize-observer';\n\nconst ARTICLE_CONTENT_SELECTOR = \"#article-content\";\nconst FOOTNOTE_SECTION_SELECTOR = \"section.footnotes[role=doc-endnotes]\";\nconst FLOATING_FOOTNOTE_MIN_WIDTH = 1620;\n\n// Computes an offset such that setting `top` on elemToAlign will put it\n// in vertical alignment with targetAlignment.\nfunction computeOffsetForAlignment(elemToAlign, targetAlignment) {\n    const offsetParentTop = elemToAlign.offsetParent.getBoundingClientRect().top;\n    // Distance between the top of the offset parent and the top of the target alignment\n    return targetAlignment.getBoundingClientRect().top - offsetParentTop;\n}\n\nfunction setFootnoteOffsets(footnotes) {\n    // Keep track of the bottom of the last element, because we don't want to\n    // overlap footnotes.\n    let bottomOfLastElem = 0;\n    Array.prototype.forEach.call(footnotes, function (footnote, i) {\n\n        // In theory, don't need to escape this because IDs can't contain\n        // quotes, in practice, not sure. ¯\\_(ツ)_/¯\n\n        // Get the thing that refers to the footnote\n        const intextLink = document.querySelector(\"a.footnote-ref[href='#\" + footnote.id + \"']\");\n        // Find its \"content parent\"; nearest paragraph or list item or\n        // whatever. We use this for alignment because it looks much cleaner.\n        // If it doesn't, your paragraphs are too long :P\n        // Fallback - use the same height as the link.\n        const verticalAlignmentTarget = intextLink.closest('p,li') || intextLink;\n\n        let offset = computeOffsetForAlignment(footnote, verticalAlignmentTarget);\n        if (offset < bottomOfLastElem) {\n            offset = bottomOfLastElem;\n        }\n        // computedStyle values are always in pixels, but have the suffix 'px'.\n        // offsetHeight doesn't include margins, but we want it to use them so\n        // we retain the style / visual fidelity when all the footnotes are\n        // crammed together.\n        bottomOfLastElem =\n            offset +\n            footnote.offsetHeight +\n            parseInt(window.getComputedStyle(footnote).marginBottom) +\n            parseInt(window.getComputedStyle(footnote).marginTop);\n\n        footnote.style.top = offset + 'px';\n        footnote.style.position = 'absolute';\n    });\n}\n\nfunction clearFootnoteOffsets(footnotes) {\n    // Reset all\n    Array.prototype.forEach.call(footnotes, function (fn, i) {\n        fn.style.top = null;\n        fn.style.position = null;\n    });\n}\n\n// Contract: this is idempotent. It won't wreck anything if you call it\n// with the same value over and over again. Though maybe it'll wreck performance...\nfunction updateFootnoteFloat(shouldFloat) {\n    const footnoteSection = document.querySelector(FOOTNOTE_SECTION_SELECTOR);\n    const footnotes = footnoteSection.querySelectorAll(\n        \"li[role=doc-endnote]\");\n\n    if (shouldFloat) {\n        // Do this first because we need styles applied before doing other\n        // calculations\n        footnoteSection.classList.add('floating-footnotes');\n        setFootnoteOffsets(footnotes);\n        subscribeToUpdates();\n    } else {\n        unsubscribeFromUpdates();\n        clearFootnoteOffsets(footnotes);\n        footnoteSection.classList.remove('floating-footnotes');\n    }\n}\n\nfunction subscribeToUpdates() {\n    const article = document.querySelector(ARTICLE_CONTENT_SELECTOR);\n    // Watch for dimension changes on the thing that holds all the footnotes so\n    // we can reposition as required\n    resizeObserver.observe(article);\n}\n\nfunction unsubscribeFromUpdates() {\n    resizeObserver.disconnect();\n}\n\nconst notifySizeChange = function() {\n    // Default state, not expanded.\n    let bigEnough = false;\n\n    return function () {\n        // Pixel width at which this looks good\n        let nowBigEnough = window.innerWidth >= FLOATING_FOOTNOTE_MIN_WIDTH;\n        if (nowBigEnough !== bigEnough) {\n            updateFootnoteFloat(nowBigEnough);\n            bigEnough = nowBigEnough;\n        }\n    };\n}();\n\nconst resizeObserver = new ResizeObserver((_entries, observer) => {\n    // By virtue of the fact that we're subscribed, we know this is true.\n    updateFootnoteFloat(true);\n});\n\nexport default function enableFloatingFootnotes() {\n    docReady(() => {\n        const footnoteSection = document.querySelector(FOOTNOTE_SECTION_SELECTOR);\n        const article = document.querySelector(ARTICLE_CONTENT_SELECTOR);\n        const allowFloatingFootnotes = article && !article.classList.contains('no-floating-footnotes');\n\n        // only set it all up if there's actually a footnote section and\n        // we haven't explicitly disabled floating footnotes.\n        if (footnoteSection && allowFloatingFootnotes) {\n            onWindowResize(notifySizeChange);\n        }\n    });\n}\n\nwindow.enableFloatingFootnotes = enableFloatingFootnotes;\nenableFloatingFootnotes();"]}