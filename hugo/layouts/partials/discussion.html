{{ $channels := dict "attention" "988521408705466398" "coworking" "988521413629595660" "go-note-go" "988521418914422845" "snippets" "988521423603654686" "roam-research" "988521428565508206" "writing" "988521433275707413" "messager" "988521438724124712" "automation" "988521443287519293" "browserflow" "988521448199041054" "note-taking" "988521453764874310" "taking-silly-ideas-seriously" "988521458965827614" "ml4code" "988521463562776616" "brains" "988521468679835749" "virtual-reality" "988521473998213221" "peer-learning-group" "988521478750363658" "spaced-repetition" "988521483921924187" "python" "988521488363687977" "twitter" "988521493640151150" "blockchain" "988521498794942494" "hardware" "988521504994111508" "expression-simplification" "988521511658872853" "scratchpad" "988521517040173106" "healthcare" "988521522215936072" "productivity" "988521626347913288" "software" "988521632219942992" "aspirational-intent" "988521637391532115" "table-tennis" "988521642680520724" "tech-tips" "988521648015687762" "automatic-video-editing" "988521661353574440" "goals" "988521666160242701" "python-fire" "988521671344394340" "javascript" "988521677791060001" "sql" "988521689304403968" "wisdom" "988521694656360448" "browser-history" "988521706668843078" "thought-experiments" "988521715913076828" "math" "988521727225122866" "ask-me-anywhere" "988521737153019994" "education" "988521746237907036" "google-apps-script" "988521757340205086" "just-for-fun" "988521767251374140" "puzzle" "988521776982159360" "esperanto" "988521787677630554" "princeton-acm" "988521800000499752" "machine-learning" 992449410875260978}}

<div class="article-widget content-widget-hr">
  <details id="chat-details">
    <summary><h3>{{ i18n "discussion" }} ðŸ’¬</h3></summary>
    {{ $channel := index $channels (replace (lower .) " " "-") }}
    <widgetbot
      server="695290335823265862"
      channel={{ $channel }}
      width="100%"
      height="600">
    </widgetbot>
  </details>
</div>

<script>
let chatLoaded = false;
const details = document.querySelector('#chat-details');
details.addEventListener("toggle", event => {
  if (details.open && !chatLoaded) {
    const script = document.createElement('script');
    script.src = "https://cdn.jsdelivr.net/npm/@widgetbot/html-embed";
    document.head.appendChild(script);
    chatLoaded = true;
  }
});
</script>
