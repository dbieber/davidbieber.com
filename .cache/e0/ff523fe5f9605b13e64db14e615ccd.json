{"id":"TA3W","dependencies":[{"name":"/home/runner/work/davidbieber.com/davidbieber.com/davidbieber.com-main/package.json","includedInParent":true,"mtime":1632683956017},{"name":"./margin-notes-utils.js","loc":{"line":6,"column":41},"parent":"/home/runner/work/davidbieber.com/davidbieber.com/davidbieber.com-main/hugo/assets/js-src/margin-notes.js","resolved":"/home/runner/work/davidbieber.com/davidbieber.com/davidbieber.com-main/hugo/assets/js-src/margin-notes-utils.js"},{"name":"@juggle/resize-observer","loc":{"line":7,"column":31},"parent":"/home/runner/work/davidbieber.com/davidbieber.com/davidbieber.com-main/hugo/assets/js-src/margin-notes.js","resolved":"/home/runner/work/davidbieber.com/davidbieber.com/davidbieber.com-main/node_modules/@juggle/resize-observer/lib/exports/resize-observer.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=p;var e=require(\"./margin-notes-utils.js\"),t=require(\"@juggle/resize-observer\"),o=\"#article-content\",n=\"section.footnotes[role=doc-endnotes]\",r=1620;function i(e,t){var o=e.offsetParent.getBoundingClientRect().top;return t.getBoundingClientRect().top-o}function c(e){var t=0;Array.prototype.forEach.call(e,function(e,o){var n=document.querySelector(\"a.footnote-ref[href='#\"+e.id+\"']\"),r=i(e,n.closest(\"p,li\")||n);r<t&&(r=t),t=r+e.offsetHeight+parseInt(window.getComputedStyle(e).marginBottom)+parseInt(window.getComputedStyle(e).marginTop),e.style.top=r+\"px\",e.style.position=\"absolute\"})}function s(e){Array.prototype.forEach.call(e,function(e,t){e.style.top=null,e.style.position=null})}function l(e){var t=document.querySelector(n),o=t.querySelectorAll(\"li[role=doc-endnote]\");e?(t.classList.add(\"floating-footnotes\"),c(o),u()):(a(),s(o),t.classList.remove(\"floating-footnotes\"))}function u(){var e=document.querySelector(o);d.observe(e)}function a(){d.disconnect()}var f=function(){var e=!1;return function(){var t=window.innerWidth>=r;t!==e&&(l(t),e=t)}}(),d=new t.ResizeObserver(function(e,t){l(!0)});function p(){(0,e.docReady)(function(){var t=document.querySelector(n),r=document.querySelector(o),i=r&&!r.classList.contains(\"no-floating-footnotes\");t&&i&&(0,e.onWindowResize)(f)})}window.enableFloatingFootnotes=p,p();"},"sourceMaps":{"js":{"mappings":[{"source":"margin-notes.js","original":{"line":130,"column":23},"generated":{"line":1,"column":0}},{"source":"margin-notes.js","original":{"line":130,"column":23},"generated":{"line":1,"column":13}},{"source":"margin-notes.js","original":{"line":130,"column":23},"generated":{"line":1,"column":20}},{"source":"margin-notes.js","original":{"line":130,"column":23},"generated":{"line":1,"column":35}},{"source":"margin-notes.js","original":{"line":130,"column":23},"generated":{"line":1,"column":43}},{"source":"margin-notes.js","original":{"line":130,"column":23},"generated":{"line":1,"column":56}},{"source":"margin-notes.js","original":{"line":130,"column":23},"generated":{"line":1,"column":57}},{"source":"margin-notes.js","original":{"line":130,"column":23},"generated":{"line":1,"column":64}},{"source":"margin-notes.js","original":{"line":130,"column":23},"generated":{"line":1,"column":68}},{"source":"margin-notes.js","original":{"line":130,"column":23},"generated":{"line":1,"column":76}},{"source":"margin-notes.js","original":{"line":130,"column":23},"generated":{"line":1,"column":84}},{"source":"margin-notes.js","original":{"line":6,"column":0},"generated":{"line":1,"column":86}},{"source":"margin-notes.js","original":{"line":6,"column":0},"generated":{"line":1,"column":90}},{"source":"margin-notes.js","original":{"line":6,"column":0},"generated":{"line":1,"column":92}},{"source":"margin-notes.js","original":{"line":6,"column":0},"generated":{"line":1,"column":100}},{"source":"margin-notes.js","original":{"line":7,"column":0},"generated":{"line":1,"column":127}},{"source":"margin-notes.js","original":{"line":7,"column":0},"generated":{"line":1,"column":129}},{"source":"margin-notes.js","original":{"line":7,"column":0},"generated":{"line":1,"column":137}},{"source":"margin-notes.js","name":"ARTICLE_CONTENT_SELECTOR","original":{"line":9,"column":6},"generated":{"line":1,"column":164}},{"source":"margin-notes.js","original":{"line":9,"column":33},"generated":{"line":1,"column":166}},{"source":"margin-notes.js","name":"FOOTNOTE_SECTION_SELECTOR","original":{"line":10,"column":6},"generated":{"line":1,"column":185}},{"source":"margin-notes.js","original":{"line":10,"column":34},"generated":{"line":1,"column":187}},{"source":"margin-notes.js","name":"FLOATING_FOOTNOTE_MIN_WIDTH","original":{"line":11,"column":6},"generated":{"line":1,"column":226}},{"source":"margin-notes.js","original":{"line":11,"column":36},"generated":{"line":1,"column":228}},{"source":"margin-notes.js","original":{"line":15,"column":0},"generated":{"line":1,"column":233}},{"source":"margin-notes.js","name":"computeOffsetForAlignment","original":{"line":15,"column":9},"generated":{"line":1,"column":242}},{"source":"margin-notes.js","name":"elemToAlign","original":{"line":15,"column":35},"generated":{"line":1,"column":244}},{"source":"margin-notes.js","name":"targetAlignment","original":{"line":15,"column":48},"generated":{"line":1,"column":246}},{"source":"margin-notes.js","name":"offsetParentTop","original":{"line":16,"column":10},"generated":{"line":1,"column":249}},{"source":"margin-notes.js","name":"offsetParentTop","original":{"line":16,"column":10},"generated":{"line":1,"column":253}},{"source":"margin-notes.js","name":"elemToAlign","original":{"line":16,"column":28},"generated":{"line":1,"column":255}},{"source":"margin-notes.js","name":"offsetParent","original":{"line":16,"column":40},"generated":{"line":1,"column":257}},{"source":"margin-notes.js","name":"getBoundingClientRect","original":{"line":16,"column":53},"generated":{"line":1,"column":270}},{"source":"margin-notes.js","name":"top","original":{"line":16,"column":77},"generated":{"line":1,"column":294}},{"source":"margin-notes.js","name":"targetAlignment","original":{"line":18,"column":11},"generated":{"line":1,"column":298}},{"source":"margin-notes.js","name":"targetAlignment","original":{"line":18,"column":11},"generated":{"line":1,"column":305}},{"source":"margin-notes.js","name":"getBoundingClientRect","original":{"line":18,"column":27},"generated":{"line":1,"column":307}},{"source":"margin-notes.js","name":"top","original":{"line":18,"column":51},"generated":{"line":1,"column":331}},{"source":"margin-notes.js","name":"offsetParentTop","original":{"line":18,"column":57},"generated":{"line":1,"column":335}},{"source":"margin-notes.js","original":{"line":21,"column":0},"generated":{"line":1,"column":337}},{"source":"margin-notes.js","name":"setFootnoteOffsets","original":{"line":21,"column":9},"generated":{"line":1,"column":346}},{"source":"margin-notes.js","name":"footnotes","original":{"line":21,"column":28},"generated":{"line":1,"column":348}},{"source":"margin-notes.js","name":"bottomOfLastElem","original":{"line":24,"column":8},"generated":{"line":1,"column":351}},{"source":"margin-notes.js","name":"bottomOfLastElem","original":{"line":24,"column":8},"generated":{"line":1,"column":355}},{"source":"margin-notes.js","original":{"line":24,"column":27},"generated":{"line":1,"column":357}},{"source":"margin-notes.js","name":"Array","original":{"line":25,"column":4},"generated":{"line":1,"column":359}},{"source":"margin-notes.js","name":"prototype","original":{"line":25,"column":10},"generated":{"line":1,"column":365}},{"source":"margin-notes.js","name":"forEach","original":{"line":25,"column":20},"generated":{"line":1,"column":375}},{"source":"margin-notes.js","name":"call","original":{"line":25,"column":28},"generated":{"line":1,"column":383}},{"source":"margin-notes.js","name":"footnotes","original":{"line":25,"column":33},"generated":{"line":1,"column":388}},{"source":"margin-notes.js","original":{"line":25,"column":44},"generated":{"line":1,"column":390}},{"source":"margin-notes.js","name":"footnote","original":{"line":25,"column":54},"generated":{"line":1,"column":399}},{"source":"margin-notes.js","name":"i","original":{"line":25,"column":64},"generated":{"line":1,"column":401}},{"source":"margin-notes.js","name":"intextLink","original":{"line":31,"column":14},"generated":{"line":1,"column":404}},{"source":"margin-notes.js","name":"intextLink","original":{"line":31,"column":14},"generated":{"line":1,"column":408}},{"source":"margin-notes.js","name":"document","original":{"line":31,"column":27},"generated":{"line":1,"column":410}},{"source":"margin-notes.js","name":"querySelector","original":{"line":31,"column":36},"generated":{"line":1,"column":419}},{"source":"margin-notes.js","original":{"line":31,"column":50},"generated":{"line":1,"column":433}},{"source":"margin-notes.js","name":"footnote","original":{"line":31,"column":77},"generated":{"line":1,"column":458}},{"source":"margin-notes.js","name":"id","original":{"line":31,"column":86},"generated":{"line":1,"column":460}},{"source":"margin-notes.js","original":{"line":31,"column":91},"generated":{"line":1,"column":463}},{"source":"margin-notes.js","name":"offset","original":{"line":38,"column":12},"generated":{"line":1,"column":469}},{"source":"margin-notes.js","name":"computeOffsetForAlignment","original":{"line":38,"column":21},"generated":{"line":1,"column":471}},{"source":"margin-notes.js","name":"footnote","original":{"line":38,"column":47},"generated":{"line":1,"column":473}},{"source":"margin-notes.js","name":"intextLink","original":{"line":36,"column":40},"generated":{"line":1,"column":475}},{"source":"margin-notes.js","name":"closest","original":{"line":36,"column":51},"generated":{"line":1,"column":477}},{"source":"margin-notes.js","original":{"line":36,"column":59},"generated":{"line":1,"column":485}},{"source":"margin-notes.js","name":"intextLink","original":{"line":36,"column":70},"generated":{"line":1,"column":494}},{"source":"margin-notes.js","name":"offset","original":{"line":39,"column":12},"generated":{"line":1,"column":497}},{"source":"margin-notes.js","name":"bottomOfLastElem","original":{"line":39,"column":21},"generated":{"line":1,"column":499}},{"source":"margin-notes.js","name":"offset","original":{"line":40,"column":12},"generated":{"line":1,"column":503}},{"source":"margin-notes.js","name":"bottomOfLastElem","original":{"line":40,"column":21},"generated":{"line":1,"column":505}},{"source":"margin-notes.js","name":"bottomOfLastElem","original":{"line":46,"column":8},"generated":{"line":1,"column":508}},{"source":"margin-notes.js","name":"offset","original":{"line":47,"column":12},"generated":{"line":1,"column":510}},{"source":"margin-notes.js","name":"footnote","original":{"line":48,"column":12},"generated":{"line":1,"column":512}},{"source":"margin-notes.js","name":"offsetHeight","original":{"line":48,"column":21},"generated":{"line":1,"column":514}},{"source":"margin-notes.js","name":"parseInt","original":{"line":49,"column":12},"generated":{"line":1,"column":527}},{"source":"margin-notes.js","name":"window","original":{"line":49,"column":21},"generated":{"line":1,"column":536}},{"source":"margin-notes.js","name":"getComputedStyle","original":{"line":49,"column":28},"generated":{"line":1,"column":543}},{"source":"margin-notes.js","name":"footnote","original":{"line":49,"column":45},"generated":{"line":1,"column":560}},{"source":"margin-notes.js","name":"marginBottom","original":{"line":49,"column":55},"generated":{"line":1,"column":563}},{"source":"margin-notes.js","name":"parseInt","original":{"line":50,"column":12},"generated":{"line":1,"column":577}},{"source":"margin-notes.js","name":"window","original":{"line":50,"column":21},"generated":{"line":1,"column":586}},{"source":"margin-notes.js","name":"getComputedStyle","original":{"line":50,"column":28},"generated":{"line":1,"column":593}},{"source":"margin-notes.js","name":"footnote","original":{"line":50,"column":45},"generated":{"line":1,"column":610}},{"source":"margin-notes.js","name":"marginTop","original":{"line":50,"column":55},"generated":{"line":1,"column":613}},{"source":"margin-notes.js","name":"footnote","original":{"line":52,"column":8},"generated":{"line":1,"column":624}},{"source":"margin-notes.js","name":"style","original":{"line":52,"column":17},"generated":{"line":1,"column":626}},{"source":"margin-notes.js","name":"top","original":{"line":52,"column":23},"generated":{"line":1,"column":632}},{"source":"margin-notes.js","name":"offset","original":{"line":52,"column":29},"generated":{"line":1,"column":636}},{"source":"margin-notes.js","original":{"line":52,"column":38},"generated":{"line":1,"column":638}},{"source":"margin-notes.js","name":"footnote","original":{"line":53,"column":8},"generated":{"line":1,"column":643}},{"source":"margin-notes.js","name":"style","original":{"line":53,"column":17},"generated":{"line":1,"column":645}},{"source":"margin-notes.js","name":"position","original":{"line":53,"column":23},"generated":{"line":1,"column":651}},{"source":"margin-notes.js","original":{"line":53,"column":34},"generated":{"line":1,"column":660}},{"source":"margin-notes.js","original":{"line":57,"column":0},"generated":{"line":1,"column":673}},{"source":"margin-notes.js","name":"clearFootnoteOffsets","original":{"line":57,"column":9},"generated":{"line":1,"column":682}},{"source":"margin-notes.js","name":"footnotes","original":{"line":57,"column":30},"generated":{"line":1,"column":684}},{"source":"margin-notes.js","name":"Array","original":{"line":59,"column":4},"generated":{"line":1,"column":687}},{"source":"margin-notes.js","name":"prototype","original":{"line":59,"column":10},"generated":{"line":1,"column":693}},{"source":"margin-notes.js","name":"forEach","original":{"line":59,"column":20},"generated":{"line":1,"column":703}},{"source":"margin-notes.js","name":"call","original":{"line":59,"column":28},"generated":{"line":1,"column":711}},{"source":"margin-notes.js","name":"footnotes","original":{"line":59,"column":33},"generated":{"line":1,"column":716}},{"source":"margin-notes.js","original":{"line":59,"column":44},"generated":{"line":1,"column":718}},{"source":"margin-notes.js","name":"fn","original":{"line":59,"column":54},"generated":{"line":1,"column":727}},{"source":"margin-notes.js","name":"i","original":{"line":59,"column":58},"generated":{"line":1,"column":729}},{"source":"margin-notes.js","name":"fn","original":{"line":60,"column":8},"generated":{"line":1,"column":732}},{"source":"margin-notes.js","name":"style","original":{"line":60,"column":11},"generated":{"line":1,"column":734}},{"source":"margin-notes.js","name":"top","original":{"line":60,"column":17},"generated":{"line":1,"column":740}},{"source":"margin-notes.js","original":{"line":60,"column":23},"generated":{"line":1,"column":744}},{"source":"margin-notes.js","name":"fn","original":{"line":61,"column":8},"generated":{"line":1,"column":749}},{"source":"margin-notes.js","name":"style","original":{"line":61,"column":11},"generated":{"line":1,"column":751}},{"source":"margin-notes.js","name":"position","original":{"line":61,"column":17},"generated":{"line":1,"column":757}},{"source":"margin-notes.js","original":{"line":61,"column":28},"generated":{"line":1,"column":766}},{"source":"margin-notes.js","original":{"line":67,"column":0},"generated":{"line":1,"column":773}},{"source":"margin-notes.js","name":"updateFootnoteFloat","original":{"line":67,"column":9},"generated":{"line":1,"column":782}},{"source":"margin-notes.js","name":"shouldFloat","original":{"line":67,"column":29},"generated":{"line":1,"column":784}},{"source":"margin-notes.js","name":"footnoteSection","original":{"line":68,"column":10},"generated":{"line":1,"column":787}},{"source":"margin-notes.js","name":"footnoteSection","original":{"line":68,"column":10},"generated":{"line":1,"column":791}},{"source":"margin-notes.js","name":"document","original":{"line":68,"column":28},"generated":{"line":1,"column":793}},{"source":"margin-notes.js","name":"querySelector","original":{"line":68,"column":37},"generated":{"line":1,"column":802}},{"source":"margin-notes.js","name":"FOOTNOTE_SECTION_SELECTOR","original":{"line":68,"column":51},"generated":{"line":1,"column":816}},{"source":"margin-notes.js","name":"footnotes","original":{"line":69,"column":10},"generated":{"line":1,"column":819}},{"source":"margin-notes.js","name":"footnoteSection","original":{"line":69,"column":22},"generated":{"line":1,"column":821}},{"source":"margin-notes.js","name":"querySelectorAll","original":{"line":69,"column":38},"generated":{"line":1,"column":823}},{"source":"margin-notes.js","original":{"line":70,"column":8},"generated":{"line":1,"column":840}},{"source":"margin-notes.js","name":"shouldFloat","original":{"line":72,"column":8},"generated":{"line":1,"column":864}},{"source":"margin-notes.js","name":"footnoteSection","original":{"line":75,"column":8},"generated":{"line":1,"column":867}},{"source":"margin-notes.js","name":"classList","original":{"line":75,"column":24},"generated":{"line":1,"column":869}},{"source":"margin-notes.js","name":"add","original":{"line":75,"column":34},"generated":{"line":1,"column":879}},{"source":"margin-notes.js","original":{"line":75,"column":38},"generated":{"line":1,"column":883}},{"source":"margin-notes.js","name":"setFootnoteOffsets","original":{"line":76,"column":8},"generated":{"line":1,"column":905}},{"source":"margin-notes.js","name":"footnotes","original":{"line":76,"column":27},"generated":{"line":1,"column":907}},{"source":"margin-notes.js","name":"subscribeToUpdates","original":{"line":77,"column":8},"generated":{"line":1,"column":910}},{"source":"margin-notes.js","name":"unsubscribeFromUpdates","original":{"line":79,"column":8},"generated":{"line":1,"column":916}},{"source":"margin-notes.js","name":"clearFootnoteOffsets","original":{"line":80,"column":8},"generated":{"line":1,"column":920}},{"source":"margin-notes.js","name":"footnotes","original":{"line":80,"column":29},"generated":{"line":1,"column":922}},{"source":"margin-notes.js","name":"footnoteSection","original":{"line":81,"column":8},"generated":{"line":1,"column":925}},{"source":"margin-notes.js","name":"classList","original":{"line":81,"column":24},"generated":{"line":1,"column":927}},{"source":"margin-notes.js","name":"remove","original":{"line":81,"column":34},"generated":{"line":1,"column":937}},{"source":"margin-notes.js","original":{"line":81,"column":41},"generated":{"line":1,"column":944}},{"source":"margin-notes.js","original":{"line":85,"column":0},"generated":{"line":1,"column":967}},{"source":"margin-notes.js","name":"subscribeToUpdates","original":{"line":85,"column":9},"generated":{"line":1,"column":976}},{"source":"margin-notes.js","name":"article","original":{"line":86,"column":10},"generated":{"line":1,"column":980}},{"source":"margin-notes.js","name":"article","original":{"line":86,"column":10},"generated":{"line":1,"column":984}},{"source":"margin-notes.js","name":"document","original":{"line":86,"column":20},"generated":{"line":1,"column":986}},{"source":"margin-notes.js","name":"querySelector","original":{"line":86,"column":29},"generated":{"line":1,"column":995}},{"source":"margin-notes.js","name":"ARTICLE_CONTENT_SELECTOR","original":{"line":86,"column":43},"generated":{"line":1,"column":1009}},{"source":"margin-notes.js","name":"resizeObserver","original":{"line":89,"column":4},"generated":{"line":1,"column":1012}},{"source":"margin-notes.js","name":"observe","original":{"line":89,"column":19},"generated":{"line":1,"column":1014}},{"source":"margin-notes.js","name":"article","original":{"line":89,"column":27},"generated":{"line":1,"column":1022}},{"source":"margin-notes.js","original":{"line":92,"column":0},"generated":{"line":1,"column":1025}},{"source":"margin-notes.js","name":"unsubscribeFromUpdates","original":{"line":92,"column":9},"generated":{"line":1,"column":1034}},{"source":"margin-notes.js","name":"resizeObserver","original":{"line":93,"column":4},"generated":{"line":1,"column":1038}},{"source":"margin-notes.js","name":"disconnect","original":{"line":93,"column":19},"generated":{"line":1,"column":1040}},{"source":"margin-notes.js","original":{"line":96,"column":0},"generated":{"line":1,"column":1053}},{"source":"margin-notes.js","name":"notifySizeChange","original":{"line":96,"column":6},"generated":{"line":1,"column":1057}},{"source":"margin-notes.js","original":{"line":96,"column":25},"generated":{"line":1,"column":1059}},{"source":"margin-notes.js","name":"bigEnough","original":{"line":98,"column":8},"generated":{"line":1,"column":1070}},{"source":"margin-notes.js","name":"bigEnough","original":{"line":98,"column":8},"generated":{"line":1,"column":1074}},{"source":"margin-notes.js","original":{"line":98,"column":20},"generated":{"line":1,"column":1077}},{"source":"margin-notes.js","original":{"line":100,"column":11},"generated":{"line":1,"column":1079}},{"source":"margin-notes.js","original":{"line":100,"column":11},"generated":{"line":1,"column":1086}},{"source":"margin-notes.js","name":"nowBigEnough","original":{"line":102,"column":12},"generated":{"line":1,"column":1097}},{"source":"margin-notes.js","name":"nowBigEnough","original":{"line":102,"column":12},"generated":{"line":1,"column":1101}},{"source":"margin-notes.js","name":"window","original":{"line":102,"column":27},"generated":{"line":1,"column":1103}},{"source":"margin-notes.js","name":"innerWidth","original":{"line":102,"column":34},"generated":{"line":1,"column":1110}},{"source":"margin-notes.js","name":"FLOATING_FOOTNOTE_MIN_WIDTH","original":{"line":102,"column":48},"generated":{"line":1,"column":1122}},{"source":"margin-notes.js","name":"nowBigEnough","original":{"line":103,"column":12},"generated":{"line":1,"column":1124}},{"source":"margin-notes.js","name":"bigEnough","original":{"line":103,"column":29},"generated":{"line":1,"column":1128}},{"source":"margin-notes.js","name":"updateFootnoteFloat","original":{"line":104,"column":12},"generated":{"line":1,"column":1132}},{"source":"margin-notes.js","name":"nowBigEnough","original":{"line":104,"column":32},"generated":{"line":1,"column":1134}},{"source":"margin-notes.js","name":"bigEnough","original":{"line":105,"column":12},"generated":{"line":1,"column":1137}},{"source":"margin-notes.js","name":"nowBigEnough","original":{"line":105,"column":24},"generated":{"line":1,"column":1139}},{"source":"margin-notes.js","original":{"line":96,"column":25},"generated":{"line":1,"column":1143}},{"source":"margin-notes.js","name":"resizeObserver","original":{"line":110,"column":6},"generated":{"line":1,"column":1146}},{"source":"margin-notes.js","original":{"line":110,"column":23},"generated":{"line":1,"column":1148}},{"source":"margin-notes.js","name":"ResizeObserver","original":{"line":110,"column":27},"generated":{"line":1,"column":1152}},{"source":"margin-notes.js","original":{"line":110,"column":23},"generated":{"line":1,"column":1154}},{"source":"margin-notes.js","original":{"line":110,"column":42},"generated":{"line":1,"column":1169}},{"source":"margin-notes.js","name":"_entries","original":{"line":110,"column":43},"generated":{"line":1,"column":1178}},{"source":"margin-notes.js","name":"observer","original":{"line":110,"column":53},"generated":{"line":1,"column":1180}},{"source":"margin-notes.js","name":"updateFootnoteFloat","original":{"line":112,"column":4},"generated":{"line":1,"column":1183}},{"source":"margin-notes.js","original":{"line":112,"column":24},"generated":{"line":1,"column":1186}},{"source":"margin-notes.js","original":{"line":115,"column":15},"generated":{"line":1,"column":1191}},{"source":"margin-notes.js","name":"enableFloatingFootnotes","original":{"line":115,"column":24},"generated":{"line":1,"column":1200}},{"source":"margin-notes.js","original":{"line":116,"column":13},"generated":{"line":1,"column":1205}},{"source":"margin-notes.js","original":{"line":116,"column":13},"generated":{"line":1,"column":1207}},{"source":"margin-notes.js","original":{"line":116,"column":13},"generated":{"line":1,"column":1209}},{"source":"margin-notes.js","original":{"line":116,"column":13},"generated":{"line":1,"column":1219}},{"source":"margin-notes.js","name":"footnoteSection","original":{"line":117,"column":14},"generated":{"line":1,"column":1230}},{"source":"margin-notes.js","name":"footnoteSection","original":{"line":117,"column":14},"generated":{"line":1,"column":1234}},{"source":"margin-notes.js","name":"document","original":{"line":117,"column":32},"generated":{"line":1,"column":1236}},{"source":"margin-notes.js","name":"querySelector","original":{"line":117,"column":41},"generated":{"line":1,"column":1245}},{"source":"margin-notes.js","name":"FOOTNOTE_SECTION_SELECTOR","original":{"line":117,"column":55},"generated":{"line":1,"column":1259}},{"source":"margin-notes.js","name":"article","original":{"line":118,"column":14},"generated":{"line":1,"column":1262}},{"source":"margin-notes.js","name":"document","original":{"line":118,"column":24},"generated":{"line":1,"column":1264}},{"source":"margin-notes.js","name":"querySelector","original":{"line":118,"column":33},"generated":{"line":1,"column":1273}},{"source":"margin-notes.js","name":"ARTICLE_CONTENT_SELECTOR","original":{"line":118,"column":47},"generated":{"line":1,"column":1287}},{"source":"margin-notes.js","name":"allowFloatingFootnotes","original":{"line":119,"column":14},"generated":{"line":1,"column":1290}},{"source":"margin-notes.js","name":"article","original":{"line":119,"column":39},"generated":{"line":1,"column":1292}},{"source":"margin-notes.js","name":"article","original":{"line":119,"column":51},"generated":{"line":1,"column":1296}},{"source":"margin-notes.js","name":"classList","original":{"line":119,"column":59},"generated":{"line":1,"column":1298}},{"source":"margin-notes.js","name":"contains","original":{"line":119,"column":69},"generated":{"line":1,"column":1308}},{"source":"margin-notes.js","original":{"line":119,"column":78},"generated":{"line":1,"column":1317}},{"source":"margin-notes.js","name":"footnoteSection","original":{"line":123,"column":12},"generated":{"line":1,"column":1342}},{"source":"margin-notes.js","name":"allowFloatingFootnotes","original":{"line":123,"column":31},"generated":{"line":1,"column":1345}},{"source":"margin-notes.js","name":"notifySizeChange","original":{"line":124,"column":27},"generated":{"line":1,"column":1349}},{"source":"margin-notes.js","name":"notifySizeChange","original":{"line":124,"column":27},"generated":{"line":1,"column":1351}},{"source":"margin-notes.js","name":"notifySizeChange","original":{"line":124,"column":27},"generated":{"line":1,"column":1353}},{"source":"margin-notes.js","name":"notifySizeChange","original":{"line":124,"column":27},"generated":{"line":1,"column":1369}},{"source":"margin-notes.js","name":"window","original":{"line":129,"column":0},"generated":{"line":1,"column":1374}},{"source":"margin-notes.js","name":"enableFloatingFootnotes","original":{"line":129,"column":7},"generated":{"line":1,"column":1381}},{"source":"margin-notes.js","name":"enableFloatingFootnotes","original":{"line":129,"column":33},"generated":{"line":1,"column":1405}},{"source":"margin-notes.js","name":"enableFloatingFootnotes","original":{"line":130,"column":0},"generated":{"line":1,"column":1407}}],"sources":{"margin-notes.js":"// MIT License\n// Copyright (c) 2019 Fabian Tamp\n// Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nimport { docReady, onWindowResize } from \"./margin-notes-utils.js\";\nimport { ResizeObserver } from '@juggle/resize-observer';\n\nconst ARTICLE_CONTENT_SELECTOR = \"#article-content\";\nconst FOOTNOTE_SECTION_SELECTOR = \"section.footnotes[role=doc-endnotes]\";\nconst FLOATING_FOOTNOTE_MIN_WIDTH = 1620;\n\n// Computes an offset such that setting `top` on elemToAlign will put it\n// in vertical alignment with targetAlignment.\nfunction computeOffsetForAlignment(elemToAlign, targetAlignment) {\n    const offsetParentTop = elemToAlign.offsetParent.getBoundingClientRect().top;\n    // Distance between the top of the offset parent and the top of the target alignment\n    return targetAlignment.getBoundingClientRect().top - offsetParentTop;\n}\n\nfunction setFootnoteOffsets(footnotes) {\n    // Keep track of the bottom of the last element, because we don't want to\n    // overlap footnotes.\n    let bottomOfLastElem = 0;\n    Array.prototype.forEach.call(footnotes, function (footnote, i) {\n\n        // In theory, don't need to escape this because IDs can't contain\n        // quotes, in practice, not sure. ¯\\_(ツ)_/¯\n\n        // Get the thing that refers to the footnote\n        const intextLink = document.querySelector(\"a.footnote-ref[href='#\" + footnote.id + \"']\");\n        // Find its \"content parent\"; nearest paragraph or list item or\n        // whatever. We use this for alignment because it looks much cleaner.\n        // If it doesn't, your paragraphs are too long :P\n        // Fallback - use the same height as the link.\n        const verticalAlignmentTarget = intextLink.closest('p,li') || intextLink;\n\n        let offset = computeOffsetForAlignment(footnote, verticalAlignmentTarget);\n        if (offset < bottomOfLastElem) {\n            offset = bottomOfLastElem;\n        }\n        // computedStyle values are always in pixels, but have the suffix 'px'.\n        // offsetHeight doesn't include margins, but we want it to use them so\n        // we retain the style / visual fidelity when all the footnotes are\n        // crammed together.\n        bottomOfLastElem =\n            offset +\n            footnote.offsetHeight +\n            parseInt(window.getComputedStyle(footnote).marginBottom) +\n            parseInt(window.getComputedStyle(footnote).marginTop);\n\n        footnote.style.top = offset + 'px';\n        footnote.style.position = 'absolute';\n    });\n}\n\nfunction clearFootnoteOffsets(footnotes) {\n    // Reset all\n    Array.prototype.forEach.call(footnotes, function (fn, i) {\n        fn.style.top = null;\n        fn.style.position = null;\n    });\n}\n\n// Contract: this is idempotent. It won't wreck anything if you call it\n// with the same value over and over again. Though maybe it'll wreck performance...\nfunction updateFootnoteFloat(shouldFloat) {\n    const footnoteSection = document.querySelector(FOOTNOTE_SECTION_SELECTOR);\n    const footnotes = footnoteSection.querySelectorAll(\n        \"li[role=doc-endnote]\");\n\n    if (shouldFloat) {\n        // Do this first because we need styles applied before doing other\n        // calculations\n        footnoteSection.classList.add('floating-footnotes');\n        setFootnoteOffsets(footnotes);\n        subscribeToUpdates();\n    } else {\n        unsubscribeFromUpdates();\n        clearFootnoteOffsets(footnotes);\n        footnoteSection.classList.remove('floating-footnotes');\n    }\n}\n\nfunction subscribeToUpdates() {\n    const article = document.querySelector(ARTICLE_CONTENT_SELECTOR);\n    // Watch for dimension changes on the thing that holds all the footnotes so\n    // we can reposition as required\n    resizeObserver.observe(article);\n}\n\nfunction unsubscribeFromUpdates() {\n    resizeObserver.disconnect();\n}\n\nconst notifySizeChange = function() {\n    // Default state, not expanded.\n    let bigEnough = false;\n\n    return function () {\n        // Pixel width at which this looks good\n        let nowBigEnough = window.innerWidth >= FLOATING_FOOTNOTE_MIN_WIDTH;\n        if (nowBigEnough !== bigEnough) {\n            updateFootnoteFloat(nowBigEnough);\n            bigEnough = nowBigEnough;\n        }\n    };\n}();\n\nconst resizeObserver = new ResizeObserver((_entries, observer) => {\n    // By virtue of the fact that we're subscribed, we know this is true.\n    updateFootnoteFloat(true);\n});\n\nexport default function enableFloatingFootnotes() {\n    docReady(() => {\n        const footnoteSection = document.querySelector(FOOTNOTE_SECTION_SELECTOR);\n        const article = document.querySelector(ARTICLE_CONTENT_SELECTOR);\n        const allowFloatingFootnotes = article && !article.classList.contains('no-floating-footnotes');\n\n        // only set it all up if there's actually a footnote section and\n        // we haven't explicitly disabled floating footnotes.\n        if (footnoteSection && allowFloatingFootnotes) {\n            onWindowResize(notifySizeChange);\n        }\n    });\n}\n\nwindow.enableFloatingFootnotes = enableFloatingFootnotes;\nenableFloatingFootnotes();"},"lineCount":null}},"error":null,"hash":"938ffdfc414c0ada37c8c80366f55730","cacheData":{"env":{}}}